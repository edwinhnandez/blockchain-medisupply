# ========================================
# CONFIGURACIÓN DE EJEMPLO
# ========================================
# Copiar este archivo a .env y completar con valores reales
# cp env.example .env

# ========================================
# AWS CONFIGURATION
# ========================================
# Credenciales de AWS para acceder a DynamoDB
# Obtener de: AWS Console > IAM > Users > Security Credentials
AWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMPLE
AWS_SECRET_ACCESS_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
AWS_REGION=us-east-1

# Nombre de la tabla DynamoDB
# Debe existir antes de iniciar la aplicación
# Crear con: make setup-dynamodb
DYNAMODB_TABLE_NAME=transacciones-blockchain

# ========================================
# BLOCKCHAIN CONFIGURATION (ALCHEMY - 2025)
# ========================================
# API Key de Alchemy para conexión a Ethereum
# Obtener de: https://dashboard.alchemy.com > Create App > View Key
# Recomendado en 2025 por mejor performance y features
# Dejar vacío para modo sin blockchain
ALCHEMY_API_KEY=

# URL RPC personalizada (opcional)
# Si se configura, tiene prioridad sobre ALCHEMY_API_KEY
# Ejemplos:
#   Alchemy: https://eth-sepolia.g.alchemy.com/v2/YOUR_API_KEY
#   Infura: https://sepolia.infura.io/v3/YOUR_PROJECT_ID
#   QuickNode: https://YOUR_ENDPOINT.quiknode.pro/YOUR_KEY
BLOCKCHAIN_RPC_URL=

# Red blockchain a usar (sepolia, mainnet, goerli)
# sepolia = testnet recomendada para 2025
BLOCKCHAIN_NETWORK=sepolia

# Private key de tu wallet Ethereum (sin el prefijo 0x)
# IMPORTANTE: Nunca compartir esta clave
# Generar wallet con: cast wallet new (Foundry) o MetaMask
# Para testnet Sepolia, obtener fondos en:
#   - https://sepoliafaucet.com (Alchemy) - 1 ETH/día
#   - https://faucets.chain.link/sepolia (Chainlink) - 20 ETH
BLOCKCHAIN_PRIVATE_KEY=

# Dirección del smart contract (si aplica)
# 0x0000... es dirección nula por defecto
CONTRACT_ADDRESS=0x0000000000000000000000000000000000000000

# ========================================
# IPFS CONFIGURATION
# ========================================
# Host del nodo IPFS
# "ipfs" cuando se usa docker-compose (nombre del servicio)
# "localhost" cuando IPFS corre localmente fuera de Docker
IPFS_HOST=ipfs

# Puerto del API de IPFS (default: 5001)
IPFS_PORT=5001

# Puerto del Gateway de IPFS (default: 8080, cambiado a 8081 para evitar conflictos)
IPFS_GATEWAY_PORT=8081

# ========================================
# ENCRYPTION
# ========================================
# Clave de encriptación AES-256
# DEBE tener exactamente 32 caracteres para AES-256
# Generar con: openssl rand -base64 32 | cut -c1-32
# IMPORTANTE: Cambiar en producción y nunca compartir
ENCRYPTION_KEY=change-this-to-32-chars-string

# ========================================
# SERVER CONFIGURATION
# ========================================
# Puerto en el que correrá el servidor
SERVER_PORT=8080

# Modo de Gin (debug, release, test)
# Usar "release" en producción
GIN_MODE=debug

# ========================================
# RATE LIMITING
# ========================================
# Número máximo de requests por ventana de tiempo
RATE_LIMIT_REQUESTS=100

# Ventana de tiempo en segundos
# Ejemplo: 100 requests / 60 segundos = 100 req/min
RATE_LIMIT_WINDOW=60

# ========================================
# AWS SECRETS MANAGER (OPCIONAL - PRODUCCIÓN)
# ========================================
# Usar AWS Secrets Manager para almacenar secrets
# Si es true, buscará BLOCKCHAIN_PRIVATE_KEY en Secrets Manager
USE_AWS_SECRETS=false

# Nombre del secret en AWS Secrets Manager que contiene la private key
BLOCKCHAIN_PRIVATE_KEY_SECRET=blockchain-private-key

# ========================================
# LOGGING (OPCIONAL)
# ========================================
# Nivel de log (debug, info, warn, error)
# LOG_LEVEL=info

# Formato de log (json, text)
# LOG_FORMAT=json

# ========================================
# MONITORING (OPCIONAL - FUTURO)
# ========================================
# PROMETHEUS_PORT=9090
# METRICS_ENABLED=true

# ========================================
# CORS (OPCIONAL - PERSONALIZAR)
# ========================================
# CORS_ALLOWED_ORIGINS=http://localhost:3000,https://ejemplo.com
# CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE
# CORS_ALLOWED_HEADERS=Content-Type,Authorization

# ========================================
# NOTAS IMPORTANTES
# ========================================
# 1. Este archivo (env.example) debe estar en git
# 2. El archivo .env NO debe estar en git (está en .gitignore)
# 3. Cambiar todos los valores de ejemplo por valores reales
# 4. La ENCRYPTION_KEY debe tener exactamente 32 caracteres
# 5. Nunca compartir credenciales reales
# 6. Para blockchain completo, necesitas INFURA_PROJECT_ID y fondos en testnet
# 7. El servicio puede funcionar sin blockchain (solo IPFS + DynamoDB)

# ========================================
# EJEMPLOS DE GENERACIÓN DE VALORES
# ========================================
# Encryption Key (32 caracteres):
#   openssl rand -base64 32 | cut -c1-32
#   o simplemente: 12345678901234567890123456789012

# Private Key Ethereum:
#   Usar wallet como MetaMask, MyEtherWallet, etc.
#   Exportar private key (quitar el 0x al inicio)

# Fondos Testnet Sepolia:
#   https://sepoliafaucet.com/
#   https://faucet.sepolia.dev/

# ========================================
# CONFIGURACIÓN MÍNIMA PARA EMPEZAR
# ========================================
# Para desarrollo local sin blockchain:
# 1. ENCRYPTION_KEY (32 caracteres)
# 2. AWS_ACCESS_KEY_ID y AWS_SECRET_ACCESS_KEY
# 3. DYNAMODB_TABLE_NAME
# 4. IPFS_HOST=ipfs (si usas docker-compose)
# 
# Con esto ya puedes:
# - Registrar transacciones
# - Almacenar en IPFS
# - Guardar en DynamoDB
# - Consultar datos
#
# La parte de blockchain es opcional para empezar

# ========================================
# VERIFICACIÓN
# ========================================
# Para verificar que todo esté bien configurado:
# 1. docker-compose up -d
# 2. curl http://localhost:8080/health
# 3. curl http://localhost:8080/ready
# 4. ./scripts/test-api.sh

